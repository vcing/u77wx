{"version":3,"sources":["webpack:///./src/seven-mark/seven-mark.entry.js","webpack:///./src/seven-mark/seven-mark.js"],"names":[],"mappings":"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","file":"seven-mark.js","sourcesContent":["import {Base} from '../base/base.js';\r\nimport {Seven} from './seven-mark.js';\r\n\r\n$(async function(){\r\n\twindow.base.seven = new Seven;\r\n})\n\n\n/** WEBPACK FOOTER **\n ** ./src/seven-mark/seven-mark.entry.js\n **/","import {BaseClass} from '../base/baseClass.js';\r\n\r\nlet path = \"http://192.168.1.105:3000/gift/\"\r\n\r\nexport class Seven extends BaseClass {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.initLine();\r\n\t\tthis.unionId = $('#u77-seven-mark').data('unionid');\r\n\t\tthis.initState();\r\n\t}\r\n\r\n\tasync initState() {\r\n\t\tlet result = false;\r\n\t\ttry {\r\n\t\t\tresult = await $.get(path+'daily-count',{unionId:this.unionId});\r\n\t\t\tconsole.log(result);\r\n\t\t}catch (e) {\r\n\t\t\tconsole.log(e);\r\n\t\t\talert('获取礼包信息失败,请刷新重试.');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif(!result) {\r\n\t\t\talert('获取礼包信息失败,请刷新重试.');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tlet count = result.count;\r\n\t\tfor (let i = 1;i <= count; i++) {\r\n\t\t\t$('#u77-seven-mark .mark .seven .point-'+i).addClass('active');\r\n\t\t}\r\n\r\n\t\t$('#u77-seven-mark .mark .present').attr('src',`http://file.u77.com/weixin/libao-0${count}.png`);\r\n\t}\r\n\r\n\tasync mark() {\r\n\t\tlet result = false;\r\n\t\ttry {\r\n\t\t\tresult = $.get(path+'daily',{unionId:this.unionId});\r\n\t\t}catch (e) {\r\n\t\t\tconsole.log(e);\r\n\t\t\talert('获取礼包码失败,请刷新重试.');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif(!result) {\r\n\t\t\talert('获取礼包码失败,请刷新重试.');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconsole.log(result);\r\n\t}\r\n\r\n\tinitLine() {\r\n\t\tlet wrap = $('#u77-seven-mark .mark .seven');\r\n\t\tfor(let i = 1;i<7;i++) {\r\n\t\t\tlet pointOne = $('#u77-seven-mark .mark .seven .point-'+i);\r\n\t\t\tlet pointTwo = $('#u77-seven-mark .mark .seven .point-'+(i+1));\r\n\t\t\tthis.drawLine(pointTwo,pointOne,wrap);\r\n\t\t}\r\n\t}\r\n\r\n\tdrawLine(a,b,wrap) {\r\n\t\tlet lineC = Math.abs(b.position().left - a.position().left);\r\n\t\tlet lineA = Math.abs(b.position().top - a.position().top);\r\n\t\tlet lineB = Math.sqrt(lineA*lineA + lineC*lineC);\r\n\t\t\r\n\t\tlet width = lineB;\r\n\r\n\t\tlet _d = lineB*lineB + lineC*lineC - lineA*lineA;\r\n\t\tlet _b = 2 * lineB * lineC;\r\n\t\tlet angle = Math.acos(_d/_b);\r\n\t\tangle = angle/Math.PI * 180;\r\n\r\n\t\tlet middleAx = a.position().left + a.outerWidth()/2;\r\n\t\tlet middleAy = a.position().top + a.outerHeight()/2;\r\n\t\tlet middleBx = b.position().left + b.outerWidth()/2;\r\n\t\tlet middleBy = b.position().top + b.outerHeight()/2;\r\n\t\tlet middlePx;\r\n\t\tlet middlePy;\r\n\t\tlet leftPoint;\r\n\t\tlet rightPoint;\r\n\t\tif(middleAx < middleBx) {\r\n\t\t\tmiddlePx = middleAx + (middleBx - middleAx)/2;\r\n\t\t\tleftPoint = a;\r\n\t\t\trightPoint = b;\r\n\t\t}else {\r\n\t\t\tmiddlePx = middleBx + (middleAx - middleBx)/2;\r\n\t\t\tleftPoint = b;\r\n\t\t\trightPoint = a;\r\n\t\t}\r\n\r\n\t\tif(middleAy < middleBy) {\r\n\t\t\tmiddlePy = middleAy + (middleBy - middleAy)/2;\r\n\t\t}else {\r\n\t\t\tmiddlePy = middleBy + (middleAy - middleBy)/2;\r\n\t\t}\r\n\r\n\t\tif(leftPoint.position().top > rightPoint.position().top) {\r\n\t\t\tangle = -angle;\r\n\t\t}\r\n\r\n\t\tmiddlePx -= lineB/2;\r\n\t\t\r\n\t\tlet template = `<div class=\"line\" style=\"left:{{x}}px;top:{{y}}px;width:{{width}}px;transform:rotate({{angle}}deg)\"></div>`;\r\n\r\n\t\twrap.append($(template.replace(/{{x}}/g,middlePx).replace(/{{y}}/g,middlePy).replace(/{{width}}/g,lineB).replace(/{{angle}}/g,angle)));\r\n\t}\r\n\r\n\tasync showMark(day) {\r\n\t\t\r\n\t}\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/seven-mark/seven-mark.js\n **/"],"sourceRoot":""}